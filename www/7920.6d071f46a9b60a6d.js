"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7920],{7920:(M,u,r)=>{r.r(u),r.d(u,{LoginPageModule:()=>L});var p=r(4755),s=r(9401),f=r(9972),m=r(116),d=r(5861),i=r(9266),e=r(2223),g=r(3672);let v=(()=>{class n{constructor(o){this.angularFireMessaging=o}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(g.BG))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h=r(7556);const y=[{path:"",component:(()=>{class n{constructor(o,t,l,S){this.afMessaging=o,this.fcmService=t,this.authService=l,this.formBuilder=S,this.addListeners=(0,d.Z)(function*(){yield i.V.addListener("registration",a=>{alert("Registration token :"+a.value)}),yield i.V.addListener("registrationError",a=>{alert("Registration err :"+a.error)}),yield i.V.addListener("pushNotificationReceived",a=>{alert("Notif recu :"+JSON.stringify(a))}),yield i.V.addListener("pushNotificationActionPerformed",a=>{alert("Push notification action performed"+a.actionId+a)})}),this.getDeliveredNotifications=(0,d.Z)(function*(){const a=yield i.V.getDeliveredNotifications();alert("delivered notifications"+JSON.stringify(a))}),this.loginForm=this.formBuilder.group({email:["",s.kI.required],mdp:["",s.kI.required]})}onSubmit(){const o=this.loginForm.value.email,t=this.loginForm.value.mdp;console.log(o),console.log(t),this.authService.login(o,t)}ngOnInit(){this.addListeners()}registerPushNotifications(){return(0,d.Z)(function*(){let o=yield i.V.checkPermissions();if(alert(JSON.stringify(o)),"prompt"===o.receive&&(o=yield i.V.requestPermissions()),"granted"!==o.receive&&alert("User denied permissions!"),"granted"===o.receive)try{yield i.V.register()}catch(t){alert(JSON.stringify(t))}})()}generateToken(){i.V.checkPermissions().then(o=>{"granted"==o.receive&&(console.log("Register"),i.V.register(),i.V.addListener("registration",t=>{console.log("Token "+t.value),this.sendTokenToServer(t.value)}),i.V.addListener("registrationError",t=>{console.error("Error on registration: "+JSON.stringify(t))}),i.V.addListener("pushNotificationReceived",t=>{this.handleIncomingNotification(t)}),i.V.addListener("pushNotificationActionPerformed",t=>{this.handleNotificationAction(t)}))})}sendTokenToServer(o){return(0,d.Z)(function*(){try{(yield fetch("http://192.168.21.172:8080/registerDeviceToken/1",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deviceToken:o})})).ok?console.log("Device token sent successfully"):console.error("Failed to send device token to the server")}catch(t){console.error("Error sending device token:",t)}})()}handleIncomingNotification(o){console.log("Received notification:",o)}handleNotificationAction(o){console.log("Notification action performed:",o)}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(g.BG),e.Y36(v),e.Y36(h.e),e.Y36(s.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:30,vars:2,consts:[[1,"body",2,"overflow","hidden",3,"fullscreen"],[1,"content",2,"height","100%"],[1,"titre"],["src","../../assets/img/logo1.png","alt","","srcset","",2,"width","150px"],[1,"sousTitre"],[1,"contenu0"],[1,"contains"],["novalidate","","method","post",1,"row","g-3","needs-validation",3,"formGroup","ngSubmit"],["for","yourUsername",1,"form-label"],[1,"input-group","has-validation"],["type","text","formControlName","email","id","yourUsername","required","",1,"form-control"],[1,"invalid-feedback"],["for","yourPassword",1,"form-label"],["type","password","id","yourPassword","formControlName","mdp","required","",1,"form-control"],["type","submit","value","Se connecter",1,"btn","btn-primary","w-100",2,"background-color","#1A1313","border","none"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3)(4,"br"),e.TgZ(5,"div",4)(6,"p"),e._uU(7,"Veuillez entrer votre adresse E-Mail et mot de passe"),e.qZA()()(),e.TgZ(8,"div",5)(9,"div",6)(10,"h3"),e._uU(11,"Login"),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"form",7),e.NdJ("ngSubmit",function(){return t.onSubmit()}),e.TgZ(14,"div")(15,"label",8),e._uU(16,"Nom de l'utilisateur"),e.qZA(),e.TgZ(17,"div",9),e._UZ(18,"input",10),e.TgZ(19,"div",11),e._uU(20,"veuillez entrer votre Nom utilisateur."),e.qZA()()(),e.TgZ(21,"div")(22,"label",12),e._uU(23,"Mot de Passe"),e.qZA(),e._UZ(24,"input",13),e.TgZ(25,"div",11),e._uU(26,"Veuillez entrer votre mot de passe"),e.qZA()(),e.TgZ(27,"div"),e._UZ(28,"br")(29,"input",14),e.qZA()()()()()()),2&o&&(e.Q6J("fullscreen",!0),e.xp6(13),e.Q6J("formGroup",t.loginForm))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.Q7,f.W2,s.sg,s.u],styles:[".body[_ngcontent-%COMP%]{--background: none}.titre[_ngcontent-%COMP%]{height:45%;padding:50px 8%;background-image:url(login.0edee20cc1a0f4b0.jpg);background-size:cover;background-repeat:no-repeat;background-position:center;inset:0}.contenu0[_ngcontent-%COMP%]{background-color:#fff;margin-top:-30px;border-radius:36px;width:100%}.contenu0[_ngcontent-%COMP%]   .contains[_ngcontent-%COMP%]{color:#1a1313;padding:30px 8%;font-weight:900}.contenu0[_ngcontent-%COMP%]   .contains[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:900;letter-spacing:2px;font-family:Product-Sans-bold}.contenu0[_ngcontent-%COMP%]   .contains[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:100;font-size:smaller;opacity:.79}.contenu0[_ngcontent-%COMP%]   .contains[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:20px}"]}),n})()}];let P=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.Bz.forChild(y),m.Bz]}),n})();var Z=r(2011);let L=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,s.u5,f.Pc,P,s.UX,Z.hO.initializeApp({apiKey:"AIzaSyDVyOXzMFfyOvlVNrxW2aIhFEgcO-YGluE",authDomain:"notification-cloud-s5.firebaseapp.com",projectId:"notification-cloud-s5",storageBucket:"notification-cloud-s5.appspot.com",messagingSenderId:"1091105700339",appId:"1:1091105700339:web:400359e471ef15dfe57a86",measurementId:"G-84XVC9Z38Q"}),g.XZ]}),n})()}}]);